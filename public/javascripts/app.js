((function(){if(!this.require){var a={},b={},c=function(f,g){var h=b[f],i=d(g,f),j;if(h)return h;if(!(j=a[i]||a[i=d(i,"./index")]))throw"module '"+f+"' not found";h={id:f,exports:{}};try{return b[f]=h.exports,j(h.exports,function(a){return c(a,e(i))},h),b[f]=h.exports}catch(k){throw delete b[f],k}},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.brunch=!0,this.require.define=function(b){for(var c in b)a[c]=b[c]}}})).call(this),this.require.define({helpers:function(a,b,c){((function(){a.BrunchApplication=function(){function a(){var a=this;$(function(){return a.initialize(a),Backbone.history.start()})}return a.prototype.initialize=function(){return null},a.prototype.el=function(){return"#arena_"+app.channel.get("source")},a.prototype.createEl=function(){return $(document.getElementsByTagName("arena:channel-widget")).replaceWith("<div data-source='"+app.channel.get("source")+"' id='"+this.el().replace("#","")+"' class='arena_channel-widget_container'></div>")},a.prototype.loading=function(){return{start:function(){return $(app.el()).addClass("loading")},stop:function(){return $(app.el()).removeClass("loading")}}},a.prototype.findAndExtractSource=function(){return $(document.getElementsByTagName("arena:channel-widget")).attr("source")},a}()})).call(this)}}),this.require.define({initialize:function(a,b,c){((function(){var c,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};c=b("helpers").BrunchApplication,e=b("routers/main_router").MainRouter,d=b("models/channel").Channel,a.Application=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.initialize=function(){var a;return this.channel=new d,this.channel.set("source",this.findAndExtractSource()),this.createEl(),this.loading().start(),this.router=new e,$("head").append("<link>"),a=$("head").children(":last"),a.attr({rel:"stylesheet",type:"text/css",href:"stylesheets/app.css"})},b}(c),window.app=new a.Application})).call(this)}}),this.require.define({"collections/blocks":function(a,b,c){((function(){var c,d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};c=b("models/block").Block,a.Blocks=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.model=c,b.prototype.comparator=function(a){return a.get("channel_connection").position},b.prototype.next=function(a){var b;return b=this.at(this.indexOf(a)),undefined===b||b<0?!1:this.at(this.indexOf(a)+1)},b.prototype.prev=function(a){var b;return b=this.at(this.indexOf(a)),undefined===b||b<1?!1:this.at(this.indexOf(a)-1)},b}(Backbone.Collection)})).call(this)}}),this.require.define({"models/block":function(a,b,c){((function(){var b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a.Block=function(a){function c(){this.channelConnection=b(this.channelConnection,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.initialize=function(){return this.checkIfMissingImage(),this.channelConnection()},c.prototype.checkIfMissingImage=function(){var a;a="/assets/interface/missing.png";if(this.get("image_thumb")===a)return this.set("image_thumb",null)},c.prototype.channelConnection=function(){var a=this;return this.set("channel_connection",_.find(this.get("connections"),function(a){return a.channel_id===app.router.channel.id}))},c}(Backbone.Model)})).call(this)}}),this.require.define({"models/channel":function(a,b,c){((function(){var c,d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};c=b("collections/blocks").Blocks,a.Channel=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.url=function(){return"http://are.na/api/v1/channels/"+this.get("slug")+".json?callback=?"},b.prototype.maybeLoad=function(a){var b=this;return a===this.get("slug")?!0:(this.clear(),app.loading().start(),this.set({slug:a,source:a,fetching:!0}),this.fetch({success:function(){return b.setupBlocks(),b.set("fetching",!1),app.loading().stop(),!0},error:function(a){return console.log("Error: "+a)}}))},b.prototype.setupBlocks=function(){return this.blocks=new c(this.get("blocks"))},b}(Backbone.Model)})).call(this)}}),this.require.define({"routers/main_router":function(a,b,c){((function(){var c,d,e,f,g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};c=b("views/block_view").BlockView,f=b("views/single_view").SingleView,e=b("views/collection_view").CollectionView,d=b("models/channel").Channel,a.MainRouter=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.routes={"":"collection","/mode::mode":"collection","/show::id":"single"},b.prototype.initialize=function(){return this.channel=app.channel,this.source=this.channel.get("source")},b.prototype.collection=function(a){var b=this;return a==null&&(a="grid"),this.channel.set({mode:"mode",mode:a}),$.when(this.channel.maybeLoad(this.source)).then(function(){return b.collectionView=new e({model:b.channel,collection:b.channel.blocks,mode:a}),$(app.el()).html(b.collectionView.render().el)})},b.prototype.single=function(a){var b=this;return $.when(this.channel.maybeLoad(this.source)).then(function(){return b.singleView=new f({model:b.channel.blocks.get(a),collection:b.channel.blocks,channel:b.channel}),$(app.el()).html(b.singleView.render().el)})},b}(Backbone.Router)})).call(this)}}),this.require.define({"views/block_view":function(a,b,c){((function(){var c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a.BlockView=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.className="arena_block",c.prototype.initialize=function(){return this.template=b("./templates/single/"+this.options.mode)},c.prototype.render=function(){return this.$el.html(this.template({mode:this.options.mode,channel:this.options.channel.toJSON(),block:this.model.toJSON()})),this},c}(Backbone.View)})).call(this)}}),this.require.define({"views/collection_view":function(a,b,c){((function(){var c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};c=b("views/block_view").BlockView,a.CollectionView=function(a){function e(){this.addOne=d(this.addOne,this),e.__super__.constructor.apply(this,arguments)}return f(e,a),e.prototype.id="arena_collection",e.prototype.initialize=function(){return this.template=b("./templates/collection/"+this.options.mode)},e.prototype.addAll=function(){return this.collection.each(this.addOne)},e.prototype.addOne=function(a){var b;return b=new c({mode:this.options.mode,model:a,collection:this.model.blocks,channel:this.model}),this.$("#arena_blocks").append(b.render().el)},e.prototype.render=function(){return console.log(this.model),this.$el.html(this.template({channel:this.model.toJSON(),blocks:this.collection.toJSON()})),this.addAll(),this},e}(Backbone.View)})).call(this)}}),this.require.define({"views/single_view":function(a,b,c){((function(){var c,d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};c=b("views/block_view").BlockView,a.SingleView=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return e(c,a),c.prototype.id="arena_single",c.prototype.className="arena_block",c.prototype.initialize=function(){return this.template=b("./templates/single/list")},c.prototype.render=function(a){return this.$el.html(this.template({channel:this.options.channel.toJSON(),block:this.model.toJSON(),blocks:this.collection.toJSON(),next:this.collection.next(this.model),prev:this.collection.prev(this.model)})),this},c}(c)})).call(this)}})